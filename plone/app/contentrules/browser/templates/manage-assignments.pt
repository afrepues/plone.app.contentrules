<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      lang="en"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      metal:use-macro="context/@@standard_macros/page">

<head>
    <metal:noborder fill-slot="top_slot"
                 tal:define="dummy python:request.set('disable_border',1)" />
</head>

<body>

<div metal:fill-slot="body">
    <h1>Content rules for <span tal:content="context/Title" /></h1>
    <p>The following content rules are active in this <span tal:content="context/portal_type" /> </p>
    <div class="active">
            <table class="listing nosort" style="width:100%">
                <thead>
                    <tr>
                        <th style="width:1.5em;"><input type="checkbox" /></th>
                        <th>content rules from parent folders</th>
                        <th style="width:1.5em;">active</th>
                    </tr>
                </thead>
                <tbody>
                    <tal:rules repeat="rule view/acquiredRules">
                    <tr tal:define="oddrow repeat/rule/odd"
                        tal:attributes="class python:oddrow and 'even' or 'odd'">
                        <td><input type="checkbox" name="ruleId:list" tal:attributes="value rule/ruleDescription/id"></td>
                        <td>
                            <dl>
                                <dt><a tal:attributes="href string:path_to_rule/${rule/ruleDescription/id}/@@manage-elements"><span
                                    tal:replace="rule/ruleDescription/title">Rule Title</span>
                                    (<span class="trigger" tal:content="rule/ruleDescription/trigger">trigger</span>)</a></dt>
                                <dd tal:content="rule/ruleDescription/description">
                                    Rule Description.
                                </dd>
                            </dl>
                        </td>
                        <td class="checker"><img tal:replace="structure context/confirm_icon.gif"
                                                 tal:condition="rule/isActive" /></td>
                    </tr>
                    </tal:rules>
                </tbody>
            </table>
            <input class="context" type="submit" value="activate" />
            <input class="context" type="submit" value="deactivate" />

            <div class="field" style="float:right;margin-right:0;">
                <label>Add content rule </label>
                <select>
                    <tal:options repeat="rule view/addableViews">
                    <option tal:attributes="value rule/id"
                            tal:content="rule/title">Addable Rule name</option>
                    </tal:options>
                </select>
            </div>
            <div class="visualClear"><!-- --></div>
            
            <table class="listing nosort" style="width:100%">
                <thead>
                    <tr>
                        <th style="width:1.5em;"><input type="checkbox" /></th>
                        <th>active content rules in this <span tal:content="here/portal_type" /></th>
                        <th  style="width:1.5em;">applies to subfolders</th>
                        <th  style="width:1.5em;">enabled</th>
                    </tr>
                </thead>
                <tbody>
                    <tal:rules repeat="rule view/assignedRules">
                    <tr tal:define="oddrow repeat/rule/odd"
                        tal:attributes="class python:oddrow and 'even' or 'odd'">
                        <td><input type="checkbox" name="ruleId:list" tal:attributes="value rule/ruleDescription/id"></td>
                        <td>
                            <dl>
                                <dt><a tal:attributes="href string:path_to_rule/${rule/ruleDescription/id}/@@manage-elements"><span
                                    tal:replace="rule/ruleDescription/title">Rule Title</span>
                                    (<span class="trigger" tal:content="rule/ruleDescription/trigger">trigger</span>)</a></dt>
                                <dd tal:content="rule/ruleDescription/description">
                                    Rule Description.
                                </dd>
                            </dl>
                        </td>
                        <td class="checker"><img tal:replace="structure context/confirm_icon.gif"
                                                 tal:condition="rule/bubble" /></td>
                        <td class="checker"><img tal:replace="structure context/confirm_icon.gif"
                                                 tal:condition="rule/enabled" /></td>
                    </tr>
                    </tal:rules>
                </tbody>
            </table>
            <input class="context" type="submit" value="enable" />
            <input class="context" type="submit" value="disable" />
            <input class="context" type="submit" value="apply to subfolders" />
            <input class="context" type="submit" value="apply to current folder only" />
            <input class="context" type="submit" value="delete" />
            <!---<input class="context" type="submit" value="add rule" />--->

    </div>  
</div>
</body>
</html>
